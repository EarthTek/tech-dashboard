(this["webpackJsonptech-dashboard"]=this["webpackJsonptech-dashboard"]||[]).push([[0],{173:function(e){e.exports=JSON.parse('{"domain":"psa-tech-dashboard.auth0.com","clientId":"jw8MpURCiiyE3TqjYriwGUtRvq9hEIgD"}')},266:function(e,t,a){e.exports=a(399)},271:function(e,t,a){},272:function(e,t,a){},385:function(e,t,a){},386:function(e,t,a){},396:function(e,t,a){},397:function(e,t,a){},399:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),i=(a(271),a(36)),o=a(12),s=(a(272),a(10)),u=a(3),m=a(226),d=a(20),p=a(228),f=a.n(p),E=a(433),h=a(185),g=a(186),b=a(66),v=a(131),y=a(187),O=a(480),w=a(444),j=a(440),x=a(413),k=a(445),S=a(188),_=a(47),N=a(434),A=a(435),C=a(436),I=a(437),R=a(442),D=a(443),T=a(446),P=a(447),W=a(448),F=a(449),L=a(18),z=a.n(L),Y=a(2),U=a(225),B=a.n(U),M=function(){var e="";e="https://precision-sustainable-ag.github.io"===window.location.pathname||"https://precision-sustainable-ag.github.io/tech-dashboard"===window.location.pathname?"/tech-dashboard":"",window.history.replaceState({},document.title,window.location.pathname+e)},G=r.a.createContext(),H=function(){return Object(n.useContext)(G)},J=Object(m.a)((function(e){return{root:{display:"flex",flexGrow:1},title:{flexGrow:1},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(i.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));function q(e){var t=J(),a=Object(d.a)(),n=r.a.useState(!1),c=Object(o.a)(n,2),l=c[0],i=c[1],m=r.a.useState(null),p=Object(o.a)(m,2),L=p[0],z=p[1],Y=Boolean(L),U=H(),B=U.isAuthenticated,M=U.loginWithRedirect,G=U.logout,q=function(){z(null)};return r.a.createElement("div",{className:t.root},r.a.createElement(E.a,{position:"fixed",className:Object(u.a)(t.appBar,Object(s.a)({},t.appBarShift,l)),color:"primary"},r.a.createElement(h.a,null,r.a.createElement(g.a,{color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},edge:"start",className:Object(u.a)(t.menuButton,l&&t.hide)},r.a.createElement(f.a,null)),r.a.createElement(b.a,{variant:"h6",noWrap:!0,className:t.title},"PSA Tech Dashboard"),r.a.createElement(g.a,{color:"inherit",onClick:function(){e.setDarkTheme()}},e.isDarkTheme?r.a.createElement(N.a,null):r.a.createElement(A.a,null)),!B&&r.a.createElement(g.a,{color:"inherit",onClick:function(){return M({})}},r.a.createElement(C.a,null)),B&&r.a.createElement("div",null,r.a.createElement(g.a,{"aria-label":"user profile","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){z(e.currentTarget)},color:"inherit"},r.a.createElement(I.a,null)),r.a.createElement(v.a,{id:"menu-appbar",anchorEl:L,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Y,onClose:q},r.a.createElement(y.a,{onClick:q},"Profile"),r.a.createElement(y.a,{onClick:function(){return G()}},"Log Out"))))),r.a.createElement(O.a,{className:t.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(g.a,{onClick:function(){i(!1)}},"ltr"===a.direction?r.a.createElement(R.a,null):r.a.createElement(D.a,null))),r.a.createElement(w.a,null),r.a.createElement(j.a,null,r.a.createElement(x.a,{button:!0,key:"Home",component:_.b,to:"/"},r.a.createElement(k.a,null,r.a.createElement(T.a,null)),r.a.createElement(S.a,{primary:"Quick Links"})),r.a.createElement(x.a,{button:!0,key:"All Data",component:_.b,to:"/table"},r.a.createElement(k.a,null,r.a.createElement(T.a,null)),r.a.createElement(S.a,{primary:"All Data"})),r.a.createElement(x.a,{button:!0,key:"Issues",component:_.b,to:"/issues"},r.a.createElement(k.a,null,r.a.createElement(P.a,null)),r.a.createElement(S.a,{primary:"Issues"})),r.a.createElement(x.a,{button:!0,key:"Devices",component:_.b,to:"/devices"},r.a.createElement(k.a,null,r.a.createElement(W.a,null)),r.a.createElement(S.a,{primary:"Devices"})),r.a.createElement(x.a,{button:!0,key:"Forms",component:_.b,to:"/kobo-forms"},r.a.createElement(k.a,null,r.a.createElement(F.a,null)),r.a.createElement(S.a,{primary:"Forms"})))))}var V=a(250),Z=a(477),K=a(454),Q=a(113),$=a(478),X=a(230),ee=a.n(X),te=a(237),ae=a.n(te),ne=a(247),re=a.n(ne),ce=a(238),le=a.n(ce),ie=a(245),oe=a.n(ie),se=a(172),ue=a.n(se),me=a(171),de=a.n(me),pe=a(239),fe=a.n(pe),Ee=a(240),he=a.n(Ee),ge=a(242),be=a.n(ge),ve=a(243),ye=a.n(ve),Oe=a(244),we=a.n(Oe),je=a(248),xe=a.n(je),ke=a(241),Se=a.n(ke),_e=a(246),Ne=a.n(_e),Ae=a(249),Ce=a.n(Ae),Ie=function(e,t){return Object(i.a)({},e,{psaForms:t.data})},Re=function(e,t){return Object(i.a)({},e,{psassgForms:t.data})},De=function(e,t){return Object(i.a)({},e,{devices:t.data})},Te=function(e,t){return Object(i.a)({},e,{repositories:t.data})},Pe=function(e,t){return Object(i.a)({},e,{helloText:"hi world"})},We=function(e,t){return Object(i.a)({},e,{site_information:t.data})},Fe=function(e,t){return Object(i.a)({},e,{site_information:e.site_information.push(t.data)})},Le=function(e,t){return"hey"===t.data.username&&"hey"===t.data.password?Object(i.a)({},e,{loggedIn:!0}):Object(i.a)({},e,{loggedIn:!1})},ze=function(e,t){switch(t.type){case"UPDATE_HELLO_WORLD":return Pe(e,t);case"SET_SITE_INFO":return We(e,t);case"ADD_ONE_SITE_INFO_TO_STATE":return Fe(e,t);case"UPDATE_ALL_REPOS":return Te(e,t);case"SET_DEVICES_INFO":return De(e,t);case"SET_PSA_FORMS":return Ie(e,t);case"SET_PSASSG_FORMS":return Re(e,t);case"CHECK_USERNAME_PASSWORD":return Le(e,t);default:return Object(i.a)({},e)}},Ye={loggedIn:!1,site_information:[],repositories:[],devices:[],psaForms:[],psassgForms:[]},Ue=Object(n.createContext)(Ye),Be=function(e){var t=e.children,a=Object(n.useReducer)(ze,Ye),c=Object(o.a)(a,2),l=c[0],i=c[1];return r.a.createElement(Ue.Provider,{value:[l,i]},t)},Me=a(59),Ge=a.n(Me),He={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(ae.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(le.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(de.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(fe.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(ue.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(he.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(Se.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(be.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(we.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ue.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(oe.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(de.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(re.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(xe.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ce.a,Object.assign({},e,{ref:t}))}))},Je=function(){var e=Object(n.useContext)(Ue),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),i=Object(o.a)(l,2),s=i[0],u=i[1];Object(n.useEffect)((function(){console.log("hello from table"),0===a.site_information.length?m("http://13.72.51.225/api/?tablerecords=all").then((function(){u(!1)})):u(!1)}),[s]);var m=function(e){return z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.awrap(Ge.a.get(e).then((function(e){var t=e.data;c({type:"SET_SITE_INFO",data:t})})));case 2:case"end":return t.stop()}}))};return r.a.createElement("div",{style:{maxWidth:"100%"}},r.a.createElement(ee.a,{isLoading:s,editable:{isEditable:function(e){return"MD"===e.state},isDeletable:!1,onRowAdd:function(e){}},icons:He,columns:[{title:"Code",field:"code"},{title:"Grower",field:"grower"},{title:"State",field:"state"},{title:"County",field:"county"},{title:"Email",field:"email"},{title:"Year",field:"year"},{title:"Address",field:"address"},{title:"Lat, Long",field:"latlng"},{title:"Notes",field:"notes"}],data:a.site_information,title:"Data Table",options:{exportButton:!0,exportFileName:"Site Information",addRowPosition:"last",exportAllData:!0,pageSize:10,pageSizeOptions:[5,10,20,50,100],groupRowSeparator:"  ",grouping:!0}}))},qe=a(90),Ve=(a(385),a(112)),Ze=a.n(Ve),Ke=a(455),Qe=a(456),$e=a(482),Xe=a(457),et=a(458),tt=a(205),at=Object(m.a)({card:{minWidth:275,maxWidth:300},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),nt=function(e){var t=e.data;at();return r.a.createElement(Ke.a,{key:t.id,className:"repo"},r.a.createElement(Qe.a,{avatar:r.a.createElement($e.a,{variant:"square",src:t.owner.avatar_url,alt:t.owner.login}),title:t.name}),r.a.createElement(Xe.a,null,r.a.createElement(b.a,null,"Open Issues: ",t.open_issues_count)),r.a.createElement(et.a,null,r.a.createElement(tt.a,{type:"button",size:"small",href:t.url,target:"_blank",title:"Check it on github"},"View")))},rt=function(e){var t=e.data;return console.log(t),r.a.createElement("div",{className:"repoRow"},t.map((function(e,t){return r.a.createElement(nt,{key:t,data:e})})))},ct=function(){var e=r.a.useContext(Ue),t=Object(o.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){(function(e){var t;return z.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z.a.awrap(Ge.a.get(e).then((function(e){return e.data})).then((function(e){return e.length>0?{success:!0,data:e}:{success:!1,data:e}})).then((function(e){return e.success?(Promise.resolve("no error"),e.data):(Promise.reject("error"),!1)})));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))})("https://api.github.com/orgs/precision-sustainable-ag/repos").then((function(e){n({type:"UPDATE_ALL_REPOS",data:e})}))}),[]),r.a.createElement("div",{className:"issuesWrapper"},0===a.repositories.length?r.a.createElement("div",{className:"loaderRow"},r.a.createElement(Ze.a,{type:"cubes",color:"#3f51b5",width:"400px",height:"400px"})):r.a.createElement(rt,{data:a.repositories}))},lt=(a(386),a(151)),it=a(152),ot=a(459),st=a(77),ut=a.n(st),mt=lt.a[300],dt=it.a[100],pt=function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!1),s=Object(o.a)(i,2),u=s[0],m=s[1],d=e.deviceData,p="",f="",E=!1;if(d.lastsession){var h=d.links.cellular[0].last_connect_time;f=ut.a.tz(h,"Africa/Abidjan").tz("America/New_York").format("MM/DD/YYYY hh:mm A").toString();var g=ut.a.tz(h,"Africa/Abidjan").tz("America/New_York").date(),b=ut.a.tz(h,"Africa/Abidjan").tz("America/New_York").month()+1,v=ut.a.tz(h,"Africa/Abidjan").tz("America/New_York").year(),y=ut()(),O=y.date(),w=y.month()+1;y.year()===v&&w===b?O===g?(p="Active Today",E=!0):p="Active this month":p="Not active this month"}return u?r.a.createElement(qe.a,{to:{pathname:"/devices/".concat(c),state:d}}):r.a.createElement(ot.a,{className:d.lastsession?"deviceActionArea aliveDevice":"deviceActionArea deadDevice",style:{backgroundColor:d.lastsession?E?dt:"":mt,color:d.lastsession?E?"#114C2A !important":"":"#360000 !important"},disabled:!d.lastsession,onClick:function(){!function(e){l(e),m(!0)}(d.id)}},r.a.createElement("p",{style:{fontWeight:"bold"}},d.name),d.lastsession?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Last Session: ",f),r.a.createElement("p",{style:{fontWeight:"bold"}},p)):r.a.createElement(n.Fragment,null,r.a.createElement("p",{style:{fontWeight:"bold"}},"Last Session: Not Available"),r.a.createElement("p",{style:{fontWeight:"bold"}},"Device Dead")))},ft=(a(390),function(){return console.log("env: ","production"),"https://private-anon-3185b3b9ae-hologram.apiary-proxy.com"}),Et=function(){var e=btoa("apikey:8Lcx29Nrqf6LqcWjqhYI9w4EHPHnCZ");return{responseType:"json",headers:{Authorization:"Basic ".concat(e)}}},ht=function(){var e=Object(n.useContext)(Ue),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),i=Object(o.a)(l,2),s=i[0],u=i[1],m=[],d="";Object(n.useEffect)((function(){console.log("hello from devices"),d=ft(),console.log(d),p("".concat(d,"/api/1/devices?withlocation=true")).then((function(){u(!1),console.log("This is just intended to retrieve basic info, rest of the data should technically come from websockets")}))}),[]);var p=function(e){var t;return z.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Et(),a.next=3,z.a.awrap(f(e,t));case 3:case"end":return a.stop()}}))},f=function e(t,a){return z.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.a.awrap(Ge.a.get(t,a).then((function(e){return m.push(e.data.data),e})).then((function(t){var n;return z.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.data.continues){r.next=5;break}return r.next=3,z.a.awrap(e("".concat(d).concat(t.data.links.next),a));case 3:r.next=9;break;case 5:n=[],n=(n=m.flat()).sort(E),c({type:"SET_DEVICES_INFO",data:n});case 9:case"end":return r.stop()}}))})).catch((function(e){console.log(e)})));case 2:case"end":return n.stop()}}))},E=function(e,t){var a=e.name.toUpperCase(),n=t.name.toUpperCase(),r=0;return a>n?r=1:a<n&&(r=-1),r};return r.a.createElement("div",{className:"devicesWrapper"},r.a.createElement("div",{className:"devicesListWrapper"},s?r.a.createElement(Ze.a,{type:"cubes",width:"500px",height:"500px",color:"#3f51b5"}):r.a.createElement("div",{className:"devices"},a.devices.map((function(e,t){return r.a.createElement("div",{className:"device",key:e.id},r.a.createElement(Ke.a,{variant:"elevation",elevation:3,className:"deviceDataWrapper"},r.a.createElement(pt,{deviceData:e})))})))))},gt=a(479),bt=a(483),vt=a(461),yt=a(484),Ot=a(476),wt=(a(392),a(31)),jt=a.n(wt),xt=a(462),kt=a(463),St=a(464),_t=a(220),Nt=a(460),At=a(465),Ct=a(466),It=a(467),Rt=a(468),Dt=a(469),Tt=a(470),Pt=a(471),Wt=a(472),Ft=a(473),Lt=a(474),zt=a(475);delete jt.a.Icon.Default.prototype._getIconUrl,jt.a.Icon.Default.mergeOptions({iconRetinaUrl:a(393),iconUrl:a(394),shadowUrl:a(395)});var Yt=Object(m.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:"100%",height:300,transform:"translateZ(0)"},titleBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"},icon:{color:"white"}}})),Ut=function(e){var t=Yt();console.log(e.location.state);var a=Object(n.useState)({name:""}),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)({flag:!1,data:{}}),u=Object(o.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)({}),f=Object(o.a)(p,2),E=f[0],h=f[1];Object(n.useEffect)((function(){void 0===e.location.state?(console.log("undefined !"),i({name:"Loading"}),Ge.a.get("".concat(ft(),"/api/1/devices/").concat(e.match.params.deviceId,"/?withlocation=true"),Et()).then((function(e){e.data.success&&(i(e.data.data),d({flag:!0,data:[e.data.data.lastsession.latitude,e.data.data.lastsession.longitude]}))}))):(i(e.location.state),Ge.a.get("".concat(ft(),"/api/1/csr/rdm?deviceid=").concat(e.location.state.id),Et()).then((function(e){console.log("most recent data",e),h(e.data.data[0])})).then((function(){d({flag:!0,data:[e.location.state.lastsession.latitude,e.location.state.lastsession.longitude]})})))}),[]);var b=function(){var e=JSON.parse(E.data);(e=e.data).substring(0,100),e.substring(100);return e=atob(e),r.a.createElement("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},e)},v=function(){var e=JSON.parse(E.data);console.log(e);var t=e.timestamp;return r.a.createElement("span",null,t)},y=function(){var e=JSON.parse(E.data).errorcode;return r.a.createElement("span",null,e)};return m.flag?r.a.createElement("div",null,r.a.createElement(xt.a,{cellHeight:600,spacing:1,className:t.gridList},r.a.createElement(kt.a,{key:l.id,style:{width:"100%"}},r.a.createElement(gt.a,{center:m.data,style:{height:"300px"},zoom:13,zoomControl:!1},r.a.createElement(bt.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(vt.a,{position:m.data},r.a.createElement(yt.a,null,"Last Active Location"))),r.a.createElement(St.a,{title:l.name,style:{zIndex:"999"},titlePosition:"top",actionIcon:r.a.createElement(_.b,{to:"/devices"},r.a.createElement(g.a,{"aria-label":"All Devices",tooltip:"All Devices",className:t.icon,to:"/devices"},r.a.createElement(Nt.a,null))),actionPosition:"left",className:t.titleBar}))),r.a.createElement(n.Fragment,{key:"griddata"},r.a.createElement(xt.a,{cols:3,style:{flexWrap:"nowrap",transform:"translateZ(0)",height:"auto"}},r.a.createElement(kt.a,{style:{height:"auto"}},r.a.createElement(Ke.a,null,r.a.createElement(Xe.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{alignItems:"flex-start",key:"created"},r.a.createElement(k.a,null,r.a.createElement(At.a,null)),r.a.createElement(S.a,{primary:"Created",secondary:l.whencreated})),r.a.createElement(x.a,{alignItems:"flex-start",key:"imei"},r.a.createElement(k.a,null,r.a.createElement(Ct.a,null)),r.a.createElement(S.a,{primary:"IMEI",secondary:l.imei})),r.a.createElement(x.a,{alignItems:"flex-start",key:"phone"},r.a.createElement(k.a,null,r.a.createElement(It.a,null)),r.a.createElement(S.a,{primary:"Phone Number",secondary:l.phonenumber?l.phonenumber:"None"})))))),r.a.createElement(kt.a,{style:{height:"auto"}},r.a.createElement(Ke.a,null,r.a.createElement(Xe.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{alignItems:"flex-start",key:"orgid"},r.a.createElement(k.a,null,r.a.createElement(Rt.a,null)),r.a.createElement(S.a,{primary:"ORG ID",secondary:l.orgid})),r.a.createElement(x.a,{alignItems:"flex-start",key:"imeisv"},r.a.createElement(k.a,null,r.a.createElement(Dt.a,null)),r.a.createElement(S.a,{primary:"IMEI SV",secondary:l.imei_sv})),r.a.createElement(x.a,{alignItems:"flex-start",key:"type"},r.a.createElement(k.a,null,r.a.createElement(Tt.a,null)),r.a.createElement(S.a,{primary:"Type",secondary:l.type})))))),r.a.createElement(kt.a,{style:{height:"auto"}},r.a.createElement(Ke.a,null,r.a.createElement(Xe.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{alignItems:"flex-start",key:"network"},r.a.createElement(k.a,null,r.a.createElement(Pt.a,null)),r.a.createElement(S.a,{primary:"Network",secondary:l.links.cellular[0].last_network_used})),r.a.createElement(x.a,{alignItems:"flex-start",key:"lastconnect"},r.a.createElement(k.a,null,r.a.createElement(Wt.a,null)),r.a.createElement(S.a,{primary:"Last Connection",secondary:ut.a.tz(l.links.cellular[0].last_connect_time,"UTC").tz("America/New_York").format("MM/DD/YYYY hh:mm A").toString()})),r.a.createElement(x.a,{alignItems:"flex-start",key:"expires"},r.a.createElement(k.a,null,r.a.createElement(Ft.a,null)),r.a.createElement(S.a,{primary:"Expires",secondary:ut.a.tz(l.links.cellular[0].whenexpires,"UTC").tz("America/New_York").format("MM/DD/YYYY").toString()}))))))),r.a.createElement(xt.a,{row:1},r.a.createElement(kt.a,{style:{height:"auto",width:"100%"}},r.a.createElement(Ke.a,null,r.a.createElement(Qe.a,{title:"Most Recent Connection"}),r.a.createElement(Xe.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{alignItems:"flex-start",key:"data"},r.a.createElement(k.a,null,r.a.createElement(Lt.a,null)),r.a.createElement(S.a,{primary:"Data",secondary:b()})),r.a.createElement(x.a,{alignItems:"flex-start",key:"timestamp"},r.a.createElement(k.a,null,r.a.createElement(Lt.a,null)),r.a.createElement(S.a,{primary:"Timestamp",secondary:v()})),r.a.createElement(x.a,{alignItems:"flex-start",key:"errorcode"},r.a.createElement(k.a,null,r.a.createElement(Lt.a,null)),r.a.createElement(S.a,{primary:"Error Code",secondary:y()}))))))),r.a.createElement(xt.a,{row:1},r.a.createElement(kt.a,{style:{height:"auto",width:"100%"}},r.a.createElement(Ke.a,null,r.a.createElement(Qe.a,{title:"Tags"}),r.a.createElement(Xe.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{alignItems:"flex-start",key:"tags"},r.a.createElement(k.a,null,r.a.createElement(zt.a,null)),r.a.createElement(S.a,{primary:JSON.parse(E.data).tags.map((function(e,t){return r.a.createElement(_t.a,{key:"chip".concat(t),style:{marginRight:"1em",marginBottom:"1em"},label:e})})),title:"Tags"}))))))))):r.a.createElement(Ot.a,{variant:"rect",width:"100%",height:"300px",animation:"wave"})},Bt=function(e){return z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="psa"===t.t0?3:"psassg"===t.t0?6:9;break;case 3:return t.next=5,z.a.awrap(Ge.a.get("http://13.72.51.225/api/kobo.php?get=assets&for=psa"));case 5:return t.abrupt("return",t.sent);case 6:return t.next=8,z.a.awrap(Ge.a.get("http://13.72.51.225/api/kobo.php?get=assets&for=psassg"));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}))},Mt=(a(396),function(){return r.a.createElement("div",{className:"skeletonWrapper"},r.a.createElement(Ot.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(Ot.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(Ot.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(Ot.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(Ot.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(Ot.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(Ot.a,{variant:"rect",height:"200px",width:"200px"}))}),Gt=(a(397),Object(m.a)({card:{maxWidth:400,width:300},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}})),Ht=function(){var e=Gt(),t=Object(n.useState)(!0),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!0),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(n.useContext)(Ue),p=Object(o.a)(d,2),f=p[0],E=p[1];return Object(n.useEffect)((function(){console.log("hello from forms"),Bt("psa").then((function(e){l(!1),E({type:"SET_PSA_FORMS",data:e.data.results})})).then((function(){return z.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.awrap(Bt("psassg").then((function(e){m(!1),E({type:"SET_PSASSG_FORMS",data:e.data.results})})));case 2:case"end":return e.stop()}}))}))}),[]),r.a.createElement("div",{className:"koboFormsWrapper"},r.a.createElement(b.a,{variant:"h5",className:"mb-2"},"PSA Forms"),c?r.a.createElement(Mt,null):0!==f.psaForms.length?r.a.createElement("div",{className:"koboForms"},f.psaForms.map((function(t,a){return""!==t.name&&t.deployment__active?r.a.createElement(Ke.a,{className:e.card,variant:"outlined",key:a},r.a.createElement(Xe.a,null,r.a.createElement(b.a,{variant:"body1"},t.name),r.a.createElement(b.a,{variant:"body2"},"Total Submission Count: ",t.deployment__submission_count))):""}))):"",r.a.createElement(b.a,{variant:"h5",className:"mt-2"},"Social Science Group Forms"),u?r.a.createElement(Mt,null):0!==f.psassgForms.length?r.a.createElement("div",{className:"koboForms"},f.psassgForms.map((function(t,a){return""!==t.name&&t.deployment__active?r.a.createElement(Ke.a,{className:e.card,variant:"outlined",key:a},r.a.createElement(Xe.a,null,r.a.createElement(b.a,{variant:"body1"},t.name),r.a.createElement(b.a,{variant:"body2"},"Total Submission Count: ",t.deployment__submission_count))):""}))):"")},Jt=a(452),qt=function(){var e=Object(n.useContext)(Ue),t=Object(o.a)(e,2);t[0],t[1];return r.a.createElement("div",null,r.a.createElement(b.a,{variant:"h5",align:"center",gutterBottom:!0},"Welcome to Precision Sustainable Agriculture Tech Dashboard"),r.a.createElement(Jt.a,{container:!0},r.a.createElement(Jt.a,{item:!0},r.a.createElement(Q.a,null,r.a.createElement(Ke.a,null,r.a.createElement(ot.a,null,r.a.createElement(b.a,null,"Card 1")))))))},Vt=function(e){var t=e.component,a=e.path,c=Object(Y.a)(e,["component","path"]),l=H(),i=l.loading,o=l.isAuthenticated,s=l.loginWithRedirect;Object(n.useEffect)((function(){if(!i&&!o){z.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.awrap(s({appState:{targetUrl:a}}));case 2:case"end":return e.stop()}}))}}),[i,o,s,a]);return r.a.createElement(qe.b,Object.assign({path:a,render:function(e){return!0===o?r.a.createElement(t,e):null}},c))},Zt=Object(m.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar}}));var Kt=function(){var e=H().loading,t=Zt(),a=Object(n.useState)({palette:{primary:{main:"#2e7d32"},secondary:{main:"#4d4d4d"},type:"light"},typography:{useNextVariants:!0,fontFamily:"'Nunito', sans-serif"}}),c=Object(o.a)(a,2),l=c[0],s=c[1],u=Object(n.useState)(!1),m=Object(o.a)(u,2),d=(m[0],m[1],Object(V.a)(l));return e?r.a.createElement(Z.a,null,r.a.createElement(K.a,{theme:d},r.a.createElement(Q.a,{style:{height:"100vh"}},r.a.createElement($.a,{height:"40vh"}),r.a.createElement(b.a,{variant:"h3",gutterBottom:!0,align:"center"},"Loading..")))):r.a.createElement(K.a,{theme:d},r.a.createElement(q,{isDarkTheme:"light"!==l.palette.type,setDarkTheme:function(){var e="light"===l.palette.type?"dark":"light";s(Object(i.a)({},l,{palette:Object(i.a)({},l.palette,{type:e})}))}}),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.toolbar}),r.a.createElement(qe.d,null,r.a.createElement(qe.b,{render:function(e){return r.a.createElement(qt,Object.assign({},e,{isDarkTheme:"light"!==l.palette.type}))},path:"/",exact:!0}),r.a.createElement(Vt,{path:"/table",component:Je}),r.a.createElement(Vt,{path:"/issues",component:ct,exact:!0}),r.a.createElement(Vt,{path:"/devices",component:ht,exact:!0}),r.a.createElement(Vt,{path:"/devices/:deviceId",component:Ut}),r.a.createElement(Vt,{path:"/kobo-forms",component:Ht}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(398);var Qt=a(50),$t=Object(Qt.a)(),Xt=a(173);l.a.render(r.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,c=void 0===a?M:a,l=Object(Y.a)(e,["children","onRedirectCallback"]),i=Object(n.useState)(),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(),p=Object(o.a)(d,2),f=p[0],E=p[1],h=Object(n.useState)(),g=Object(o.a)(h,2),b=g[0],v=g[1],y=Object(n.useState)(!0),O=Object(o.a)(y,2),w=O[0],j=O[1],x=Object(n.useState)(!1),k=Object(o.a)(x,2),S=k[0],_=k[1];Object(n.useEffect)((function(){!function(){var e,t,a,n,r;z.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,z.a.awrap(B()(l));case 2:if(e=i.sent,v(e),!window.location.search.includes("code=")||!window.location.search.includes("state=")){i.next=10;break}return i.next=7,z.a.awrap(e.handleRedirectCallback());case 7:t=i.sent,a=t.appState,c(a);case 10:return i.next=12,z.a.awrap(e.isAuthenticated());case 12:if(n=i.sent,m(n),!n){i.next=19;break}return i.next=17,z.a.awrap(e.getUser());case 17:r=i.sent,E(r);case 19:j(!1);case 20:case"end":return i.stop()}}))}()}),[]);return r.a.createElement(G.Provider,{value:{isAuthenticated:u,user:f,loading:w,popupOpen:S,loginWithPopup:function(){var e,t,a=arguments;return z.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{redirect_uri:"https://precisionsustainableag.org/tech-dashboard"},_(!0),n.prev=2,n.next=5,z.a.awrap(b.loginWithPopup(e));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:return n.prev=10,_(!1),n.finish(10);case 13:return n.next=15,z.a.awrap(b.getUser());case 15:t=n.sent,E(t),m(!0);case 18:case"end":return n.stop()}}),null,null,[[2,7,10,13]])},handleRedirectCallback:function(){var e;return z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return j(!0),t.next=3,z.a.awrap(b.handleRedirectCallback());case 3:return t.next=5,z.a.awrap(b.getUser());case 5:e=t.sent,j(!1),m(!0),E(e);case 9:case"end":return t.stop()}}))},getIdTokenClaims:function(){return b.getIdTokenClaims.apply(b,arguments)},loginWithRedirect:function(){return b.loginWithRedirect.apply(b,arguments)},getTokenSilently:function(){return b.getTokenSilently.apply(b,arguments)},getTokenWithPopup:function(){return b.getTokenWithPopup.apply(b,arguments)},logout:function(){return b.logout.apply(b,arguments)}}},t)}),{domain:Xt.domain,client_id:Xt.clientId,redirect_uri:window.location.origin,onRedirectCallback:function(e){$t.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(Be,null,r.a.createElement(_.a,{history:$t},r.a.createElement(Kt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[266,1,2]]]);
//# sourceMappingURL=main.ee7b5855.chunk.js.map