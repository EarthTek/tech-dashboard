(this["webpackJsonptech-dashboard"]=this["webpackJsonptech-dashboard"]||[]).push([[0],{173:function(e){e.exports=JSON.parse('{"domain":"psa-tech-dashboard.auth0.com","clientId":"jw8MpURCiiyE3TqjYriwGUtRvq9hEIgD","roleUrl":"https://precision-sustainable-ag/role"}')},266:function(e,t,a){e.exports=a(399)},271:function(e,t,a){},272:function(e,t,a){},385:function(e,t,a){},386:function(e,t,a){},396:function(e,t,a){},397:function(e,t,a){},399:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),l=(a(271),a(32)),i=a(12),s=(a(272),a(10)),u=a(17),m=a.n(u),d=a(3),p=a(226),f=a(20),E=a(228),h=a.n(E),g=a(433),b=a(193),v=a(194),y=a(66),w=a(131),O=a(195),j=a(481),x=a(444),k=a(440),S=a(413),_=a(445),N=a(196),R=a(48),A=a(434),C=a(435),I=a(436),T=a(437),D=a(442),P=a(443),W=a(446),F=a(447),L=a(448),z=a(449),U=a(2),Y=a(225),B=a.n(Y),M=function(){return window.history.replaceState({},document.title,window.location.pathname)},G=r.a.createContext(),H=function(){return Object(n.useContext)(G)},q=a(42),J=a.n(q),V=function(e,t){return Object(l.a)({},e,{userRole:t.data.userRole})},Z=function(e,t){return Object(l.a)({},e,{psaForms:t.data})},K=function(e,t){return Object(l.a)({},e,{psassgForms:t.data})},Q=function(e,t){return Object(l.a)({},e,{devices:t.data})},$=function(e,t){return Object(l.a)({},e,{repositories:t.data})},X=function(e,t){return Object(l.a)({},e,{helloText:"hi world"})},ee=function(e,t){return Object(l.a)({},e,{site_information:t.data})},te=function(e,t){return Object(l.a)({},e,{site_information:e.site_information.push(t.data)})},ae=function(e,t){return"hey"===t.data.username&&"hey"===t.data.password?Object(l.a)({},e,{loggedIn:!0}):Object(l.a)({},e,{loggedIn:!1})},ne=function(e,t){switch(t.type){case"UPDATE_HELLO_WORLD":return X(e,t);case"SET_SITE_INFO":return ee(e,t);case"ADD_ONE_SITE_INFO_TO_STATE":return te(e,t);case"UPDATE_ALL_REPOS":return $(e,t);case"SET_DEVICES_INFO":return Q(e,t);case"SET_PSA_FORMS":return Z(e,t);case"SET_PSASSG_FORMS":return K(e,t);case"CHECK_USERNAME_PASSWORD":return ae(e,t);case"UPDATE_ROLE":return V(e,t);default:return Object(l.a)({},e)}},re={loggedIn:!1,site_information:[],repositories:[],devices:[],psaForms:[],psassgForms:[],userRole:"default"},ce=Object(n.createContext)(re),oe=function(e){var t=e.children,a=Object(n.useReducer)(ne,re),c=Object(i.a)(a,2),o=c[0],l=c[1];return r.a.createElement(ce.Provider,{value:[o,l]},t)},le=Object(p.a)((function(e){return{root:{display:"flex",flexGrow:1},title:{flexGrow:1},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(l.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));function ie(e){var t=le(),a=Object(f.a)(),c=r.a.useState(!1),o=Object(i.a)(c,2),l=o[0],u=o[1],p=r.a.useState(null),E=Object(i.a)(p,2),U=E[0],Y=E[1],B=Boolean(U),M=Object(n.useContext)(ce),G=Object(i.a)(M,2),q=G[0],V=G[1],Z=H(),K=Z.isAuthenticated,Q=Z.loginWithRedirect,$=Z.logout,X=Z.user,ee=function(){Y(null)};return Object(n.useEffect)((function(){K&&function(e){m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.awrap(J.a.get("http://52.227.159.166/api/records/users?filter=email,eq,".concat(e.email),{mode:"no-cors"}).then((function(t){console.log(t);var a,n=t.data.records[0];0===n.length?(q.userRole,a=e.email,m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(J.a.post("http://52.227.159.166/api/records/users",{userid:"",email:a,role:"default",updated:""}).catch((function(e){console.log(e.response)})));case 2:case"end":return e.stop()}})),V({type:"UPDATE_ROLE",data:{userRole:"default"}})):V({type:"UPDATE_ROLE",data:{userRole:n.role}}),console.log(t)})));case 2:case"end":return t.stop()}}))}(X)}),[K]),r.a.createElement("div",{className:t.root},r.a.createElement(g.a,{position:"fixed",className:Object(d.a)(t.appBar,Object(s.a)({},t.appBarShift,l)),color:"primary"},r.a.createElement(b.a,null,r.a.createElement(v.a,{color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)},edge:"start",className:Object(d.a)(t.menuButton,l&&t.hide)},r.a.createElement(h.a,null)),r.a.createElement(y.a,{variant:"h6",noWrap:!0,className:t.title},"PSA Tech Dashboard"),r.a.createElement(v.a,{color:"inherit",onClick:function(){e.setDarkTheme()}},e.isDarkTheme?r.a.createElement(A.a,null):r.a.createElement(C.a,null)),!K&&r.a.createElement(v.a,{color:"inherit",onClick:function(){return Q({})}},r.a.createElement(I.a,null)),K&&r.a.createElement("div",null,r.a.createElement(v.a,{"aria-label":"user profile","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){Y(e.currentTarget)},color:"inherit"},r.a.createElement(T.a,null)),r.a.createElement(w.a,{id:"menu-appbar",anchorEl:U,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:B,onClose:ee},r.a.createElement(O.a,{onClick:ee},"Profile"),r.a.createElement(O.a,{onClick:function(){return $()}},"Log Out"))))),r.a.createElement(j.a,{className:t.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(v.a,{onClick:function(){u(!1)}},"ltr"===a.direction?r.a.createElement(D.a,null):r.a.createElement(P.a,null))),r.a.createElement(x.a,null),r.a.createElement(k.a,null,r.a.createElement(S.a,{button:!0,key:"Home",component:R.b,to:"/"},r.a.createElement(_.a,null,r.a.createElement(W.a,null)),r.a.createElement(N.a,{primary:"Quick Links"})),r.a.createElement(S.a,{button:!0,key:"All Data",component:R.b,to:"/table"},r.a.createElement(_.a,null,r.a.createElement(W.a,null)),r.a.createElement(N.a,{primary:"All Data"})),r.a.createElement(S.a,{button:!0,key:"Issues",component:R.b,to:"/issues"},r.a.createElement(_.a,null,r.a.createElement(F.a,null)),r.a.createElement(N.a,{primary:"Issues"})),r.a.createElement(S.a,{button:!0,key:"Devices",component:R.b,to:"/devices"},r.a.createElement(_.a,null,r.a.createElement(L.a,null)),r.a.createElement(N.a,{primary:"Devices"})),r.a.createElement(S.a,{button:!0,key:"Forms",component:R.b,to:"/kobo-forms"},r.a.createElement(_.a,null,r.a.createElement(z.a,null)),r.a.createElement(N.a,{primary:"Forms"})))))}var se=a(250),ue=a(477),me=a(454),de=a(113),pe=a(479),fe=a(478),Ee=a(230),he=a.n(Ee),ge=a(237),be=a.n(ge),ve=a(247),ye=a.n(ve),we=a(238),Oe=a.n(we),je=a(245),xe=a.n(je),ke=a(172),Se=a.n(ke),_e=a(171),Ne=a.n(_e),Re=a(239),Ae=a.n(Re),Ce=a(240),Ie=a.n(Ce),Te=a(242),De=a.n(Te),Pe=a(243),We=a.n(Pe),Fe=a(244),Le=a.n(Fe),ze=a(248),Ue=a.n(ze),Ye=a(241),Be=a.n(Ye),Me=a(246),Ge=a.n(Me),He=a(249),qe=a.n(He),Je={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(be.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(Oe.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ae.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(Se.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ie.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(Be.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(De.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(We.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Le.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Se.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(xe.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ge.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ue.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(qe.a,Object.assign({},e,{ref:t}))}))},Ve=function(){var e=Object(n.useContext)(ce),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),l=Object(i.a)(o,2),s=l[0],u=l[1],d=H().user;Object(n.useEffect)((function(){console.log("hello from table"),console.log(d),0===a.site_information.length?p("http://13.72.51.225/api/?tablerecords=all").then((function(){u(!1)})):u(!1)}),[s]);var p=function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.awrap(J.a.get(e).then((function(e){var t=e.data;c({type:"SET_SITE_INFO",data:t})})));case 2:case"end":return t.stop()}}))};return r.a.createElement("div",{style:{maxWidth:"100%"}},r.a.createElement(he.a,{isLoading:s,editable:{isEditable:function(e){return"MD"===e.state},isDeletable:!1,onRowAdd:function(e){}},icons:Je,columns:[{title:"Code",field:"code"},{title:"Grower",field:"grower"},{title:"State",field:"state"},{title:"County",field:"county"},{title:"Email",field:"email"},{title:"Year",field:"year"},{title:"Address",field:"address"},{title:"Lat, Long",field:"latlng"},{title:"Notes",field:"notes"}],data:a.site_information,title:"Data Table",options:{exportButton:!0,exportFileName:"Site Information",addRowPosition:"last",exportAllData:!0,pageSize:10,pageSizeOptions:[5,10,20,50,100],groupRowSeparator:"  ",grouping:!0}}))},Ze=a(90),Ke=(a(385),a(112)),Qe=a.n(Ke),$e=a(455),Xe=a(456),et=a(483),tt=a(457),at=a(458),nt=a(213),rt=Object(p.a)({card:{minWidth:275,maxWidth:300},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),ct=function(e){var t=e.data;rt();return r.a.createElement($e.a,{key:t.id,className:"repo"},r.a.createElement(Xe.a,{avatar:r.a.createElement(et.a,{variant:"square",src:t.owner.avatar_url,alt:t.owner.login}),title:t.name}),r.a.createElement(tt.a,null,r.a.createElement(y.a,null,"Open Issues: ",t.open_issues_count)),r.a.createElement(at.a,null,r.a.createElement(nt.a,{type:"button",size:"small",href:t.url,target:"_blank",title:"Check it on github"},"View")))},ot=function(e){var t=e.data;return console.log(t),r.a.createElement("div",{className:"repoRow"},t.map((function(e,t){return r.a.createElement(ct,{key:t,data:e})})))},lt=function(){var e=r.a.useContext(ce),t=Object(i.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){(function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(J.a.get(e).then((function(e){return e.data})).then((function(e){return e.length>0?{success:!0,data:e}:{success:!1,data:e}})).then((function(e){return e.success?(Promise.resolve("no error"),e.data):(Promise.reject("error"),!1)})));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))})("https://api.github.com/orgs/precision-sustainable-ag/repos").then((function(e){n({type:"UPDATE_ALL_REPOS",data:e})}))}),[]),r.a.createElement("div",{className:"issuesWrapper"},0===a.repositories.length?r.a.createElement("div",{className:"loaderRow"},r.a.createElement(Qe.a,{type:"cubes",color:"#3f51b5",width:"400px",height:"400px"})):r.a.createElement(ot,{data:a.repositories}))},it=(a(386),a(151)),st=a(152),ut=a(459),mt=a(77),dt=a.n(mt),pt=it.a[300],ft=st.a[100],Et=function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],m=s[1],d=e.deviceData,p="",f="",E=!1;if(d.lastsession){var h=d.links.cellular[0].last_connect_time;f=dt.a.tz(h,"Africa/Abidjan").tz("America/New_York").format("MM/DD/YYYY hh:mm A").toString();var g=dt.a.tz(h,"Africa/Abidjan").tz("America/New_York").date(),b=dt.a.tz(h,"Africa/Abidjan").tz("America/New_York").month()+1,v=dt.a.tz(h,"Africa/Abidjan").tz("America/New_York").year(),y=dt()(),w=y.date(),O=y.month()+1;y.year()===v&&O===b?w===g?(p="Active Today",E=!0):p="Active this month":p="Not active this month"}return u?r.a.createElement(Ze.a,{to:{pathname:"/devices/".concat(c),state:d}}):r.a.createElement(ut.a,{className:d.lastsession?"deviceActionArea aliveDevice":"deviceActionArea deadDevice",style:{backgroundColor:d.lastsession?E?ft:"":pt,color:d.lastsession?E?"#114C2A !important":"":"#360000 !important"},disabled:!d.lastsession,onClick:function(){!function(e){o(e),m(!0)}(d.id)}},r.a.createElement("p",{style:{fontWeight:"bold"}},d.name),d.lastsession?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Last Session: ",f),r.a.createElement("p",{style:{fontWeight:"bold"}},p)):r.a.createElement(n.Fragment,null,r.a.createElement("p",{style:{fontWeight:"bold"}},"Last Session: Not Available"),r.a.createElement("p",{style:{fontWeight:"bold"}},"Device Dead")))},ht=(a(390),function(){return console.log("env: ","production"),"https://private-anon-3185b3b9ae-hologram.apiary-proxy.com"}),gt=function(){var e=btoa("apikey:8Lcx29Nrqf6LqcWjqhYI9w4EHPHnCZ");return{responseType:"json",headers:{Authorization:"Basic ".concat(e)}}},bt=function(){var e=Object(n.useContext)(ce),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),l=Object(i.a)(o,2),s=l[0],u=l[1],d=[],p="";Object(n.useEffect)((function(){console.log("hello from devices"),p=ht(),console.log(p),f("".concat(p,"/api/1/devices?withlocation=true")).then((function(){u(!1),console.log("This is just intended to retrieve basic info, rest of the data should technically come from websockets")}))}),[]);var f=function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=gt(),a.next=3,m.a.awrap(E(e,t));case 3:case"end":return a.stop()}}))},E=function e(t,a){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(J.a.get(t,a).then((function(e){return d.push(e.data.data),e})).then((function(t){var n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.data.continues){r.next=5;break}return r.next=3,m.a.awrap(e("".concat(p).concat(t.data.links.next),a));case 3:r.next=9;break;case 5:n=[],n=(n=d.flat()).sort(h),c({type:"SET_DEVICES_INFO",data:n});case 9:case"end":return r.stop()}}))})).catch((function(e){console.log(e)})));case 2:case"end":return n.stop()}}))},h=function(e,t){var a=e.name.toUpperCase(),n=t.name.toUpperCase(),r=0;return a>n?r=1:a<n&&(r=-1),r};return r.a.createElement("div",{className:"devicesWrapper"},r.a.createElement("div",{className:"devicesListWrapper"},s?r.a.createElement(Qe.a,{type:"cubes",width:"500px",height:"500px",color:"#3f51b5"}):r.a.createElement("div",{className:"devices"},a.devices.map((function(e,t){return r.a.createElement("div",{className:"device",key:e.id},r.a.createElement($e.a,{variant:"elevation",elevation:3,className:"deviceDataWrapper"},r.a.createElement(Et,{deviceData:e})))})))))},vt=a(480),yt=a(484),wt=a(461),Ot=a(485),jt=a(476),xt=(a(392),a(31)),kt=a.n(xt),St=a(462),_t=a(463),Nt=a(464),Rt=a(220),At=a(460),Ct=a(465),It=a(466),Tt=a(467),Dt=a(468),Pt=a(469),Wt=a(470),Ft=a(471),Lt=a(472),zt=a(473),Ut=a(474),Yt=a(475);delete kt.a.Icon.Default.prototype._getIconUrl,kt.a.Icon.Default.mergeOptions({iconRetinaUrl:a(393),iconUrl:a(394),shadowUrl:a(395)});var Bt=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:"100%",height:300,transform:"translateZ(0)"},titleBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"},icon:{color:"white"}}})),Mt=function(e){var t=Bt();console.log(e.location.state);var a=Object(n.useState)({name:""}),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)({flag:!1,data:{}}),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)({}),f=Object(i.a)(p,2),E=f[0],h=f[1];Object(n.useEffect)((function(){void 0===e.location.state?(console.log("undefined !"),l({name:"Loading"}),J.a.get("".concat(ht(),"/api/1/devices/").concat(e.match.params.deviceId,"/?withlocation=true"),gt()).then((function(e){e.data.success&&(l(e.data.data),d({flag:!0,data:[e.data.data.lastsession.latitude,e.data.data.lastsession.longitude]}))}))):(l(e.location.state),J.a.get("".concat(ht(),"/api/1/csr/rdm?deviceid=").concat(e.location.state.id),gt()).then((function(e){console.log("most recent data",e),h(e.data.data[0])})).then((function(){d({flag:!0,data:[e.location.state.lastsession.latitude,e.location.state.lastsession.longitude]})})))}),[]);var g=function(){var e=JSON.parse(E.data);(e=e.data).substring(0,100),e.substring(100);return e=atob(e),r.a.createElement("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},e)},b=function(){var e=JSON.parse(E.data);console.log(e);var t=e.timestamp;return r.a.createElement("span",null,t)},y=function(){var e=JSON.parse(E.data).errorcode;return r.a.createElement("span",null,e)};return m.flag?r.a.createElement("div",null,r.a.createElement(St.a,{cellHeight:600,spacing:1,className:t.gridList},r.a.createElement(_t.a,{key:o.id,style:{width:"100%"}},r.a.createElement(vt.a,{center:m.data,style:{height:"300px"},zoom:13,zoomControl:!1},r.a.createElement(yt.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(wt.a,{position:m.data},r.a.createElement(Ot.a,null,"Last Active Location"))),r.a.createElement(Nt.a,{title:o.name,style:{zIndex:"999"},titlePosition:"top",actionIcon:r.a.createElement(R.b,{to:"/devices"},r.a.createElement(v.a,{"aria-label":"All Devices",tooltip:"All Devices",className:t.icon,to:"/devices"},r.a.createElement(At.a,null))),actionPosition:"left",className:t.titleBar}))),r.a.createElement(n.Fragment,{key:"griddata"},r.a.createElement(St.a,{cols:3,style:{flexWrap:"nowrap",transform:"translateZ(0)",height:"auto"}},r.a.createElement(_t.a,{style:{height:"auto"}},r.a.createElement($e.a,null,r.a.createElement(tt.a,null,r.a.createElement(k.a,null,r.a.createElement(S.a,{alignItems:"flex-start",key:"created"},r.a.createElement(_.a,null,r.a.createElement(Ct.a,null)),r.a.createElement(N.a,{primary:"Created",secondary:o.whencreated})),r.a.createElement(S.a,{alignItems:"flex-start",key:"imei"},r.a.createElement(_.a,null,r.a.createElement(It.a,null)),r.a.createElement(N.a,{primary:"IMEI",secondary:o.imei})),r.a.createElement(S.a,{alignItems:"flex-start",key:"phone"},r.a.createElement(_.a,null,r.a.createElement(Tt.a,null)),r.a.createElement(N.a,{primary:"Phone Number",secondary:o.phonenumber?o.phonenumber:"None"})))))),r.a.createElement(_t.a,{style:{height:"auto"}},r.a.createElement($e.a,null,r.a.createElement(tt.a,null,r.a.createElement(k.a,null,r.a.createElement(S.a,{alignItems:"flex-start",key:"orgid"},r.a.createElement(_.a,null,r.a.createElement(Dt.a,null)),r.a.createElement(N.a,{primary:"ORG ID",secondary:o.orgid})),r.a.createElement(S.a,{alignItems:"flex-start",key:"imeisv"},r.a.createElement(_.a,null,r.a.createElement(Pt.a,null)),r.a.createElement(N.a,{primary:"IMEI SV",secondary:o.imei_sv})),r.a.createElement(S.a,{alignItems:"flex-start",key:"type"},r.a.createElement(_.a,null,r.a.createElement(Wt.a,null)),r.a.createElement(N.a,{primary:"Type",secondary:o.type})))))),r.a.createElement(_t.a,{style:{height:"auto"}},r.a.createElement($e.a,null,r.a.createElement(tt.a,null,r.a.createElement(k.a,null,r.a.createElement(S.a,{alignItems:"flex-start",key:"network"},r.a.createElement(_.a,null,r.a.createElement(Ft.a,null)),r.a.createElement(N.a,{primary:"Network",secondary:o.links.cellular[0].last_network_used})),r.a.createElement(S.a,{alignItems:"flex-start",key:"lastconnect"},r.a.createElement(_.a,null,r.a.createElement(Lt.a,null)),r.a.createElement(N.a,{primary:"Last Connection",secondary:dt.a.tz(o.links.cellular[0].last_connect_time,"UTC").tz("America/New_York").format("MM/DD/YYYY hh:mm A").toString()})),r.a.createElement(S.a,{alignItems:"flex-start",key:"expires"},r.a.createElement(_.a,null,r.a.createElement(zt.a,null)),r.a.createElement(N.a,{primary:"Expires",secondary:dt.a.tz(o.links.cellular[0].whenexpires,"UTC").tz("America/New_York").format("MM/DD/YYYY").toString()}))))))),r.a.createElement(St.a,{row:1},r.a.createElement(_t.a,{style:{height:"auto",width:"100%"}},r.a.createElement($e.a,null,r.a.createElement(Xe.a,{title:"Most Recent Connection"}),r.a.createElement(tt.a,null,r.a.createElement(k.a,null,r.a.createElement(S.a,{alignItems:"flex-start",key:"data"},r.a.createElement(_.a,null,r.a.createElement(Ut.a,null)),r.a.createElement(N.a,{primary:"Data",secondary:g()})),r.a.createElement(S.a,{alignItems:"flex-start",key:"timestamp"},r.a.createElement(_.a,null,r.a.createElement(Ut.a,null)),r.a.createElement(N.a,{primary:"Timestamp",secondary:b()})),r.a.createElement(S.a,{alignItems:"flex-start",key:"errorcode"},r.a.createElement(_.a,null,r.a.createElement(Ut.a,null)),r.a.createElement(N.a,{primary:"Error Code",secondary:y()}))))))),r.a.createElement(St.a,{row:1},r.a.createElement(_t.a,{style:{height:"auto",width:"100%"}},r.a.createElement($e.a,null,r.a.createElement(Xe.a,{title:"Tags"}),r.a.createElement(tt.a,null,r.a.createElement(k.a,null,r.a.createElement(S.a,{alignItems:"flex-start",key:"tags"},r.a.createElement(_.a,null,r.a.createElement(Yt.a,null)),r.a.createElement(N.a,{primary:JSON.parse(E.data).tags.map((function(e,t){return r.a.createElement(Rt.a,{key:"chip".concat(t),style:{marginRight:"1em",marginBottom:"1em"},label:e})})),title:"Tags"}))))))))):r.a.createElement(jt.a,{variant:"rect",width:"100%",height:"300px",animation:"wave"})},Gt=function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="psa"===t.t0?3:"psassg"===t.t0?6:9;break;case 3:return t.next=5,m.a.awrap(J.a.get("http://13.72.51.225/api/kobo.php?get=assets&for=psa"));case 5:return t.abrupt("return",t.sent);case 6:return t.next=8,m.a.awrap(J.a.get("http://13.72.51.225/api/kobo.php?get=assets&for=psassg"));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}))},Ht=(a(396),function(){return r.a.createElement("div",{className:"skeletonWrapper"},r.a.createElement(jt.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(jt.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(jt.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(jt.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(jt.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(jt.a,{variant:"rect",height:"200px",width:"200px"}),r.a.createElement(jt.a,{variant:"rect",height:"200px",width:"200px"}))}),qt=(a(397),Object(p.a)({card:{maxWidth:400,width:300},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}})),Jt=function(){var e=qt(),t=Object(n.useState)(!0),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!0),s=Object(i.a)(l,2),u=s[0],d=s[1],p=Object(n.useContext)(ce),f=Object(i.a)(p,2),E=f[0],h=f[1];return Object(n.useEffect)((function(){console.log("hello from forms"),Gt("psa").then((function(e){o(!1),h({type:"SET_PSA_FORMS",data:e.data.results})})).then((function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(Gt("psassg").then((function(e){d(!1),h({type:"SET_PSASSG_FORMS",data:e.data.results})})));case 2:case"end":return e.stop()}}))}))}),[]),r.a.createElement(de.a,null,r.a.createElement(pe.a,{className:"koboFormsWrapper"},r.a.createElement(y.a,{variant:"h5",className:"mb-2"},"PSA Forms"),c?r.a.createElement(Ht,null):0!==E.psaForms.length?r.a.createElement("div",{className:"koboForms"},E.psaForms.map((function(t,a){return""!==t.name&&t.deployment__active?r.a.createElement($e.a,{className:e.card,variant:"outlined",key:a},r.a.createElement(tt.a,null,r.a.createElement(y.a,{variant:"body1"},t.name),r.a.createElement(y.a,{variant:"body2"},"Total Submission Count:"," ",t.deployment__submission_count))):""}))):"",r.a.createElement(y.a,{variant:"h5",className:"mt-2"},"Social Science Group Forms"),u?r.a.createElement(Ht,null):0!==E.psassgForms.length?r.a.createElement("div",{className:"koboForms"},E.psassgForms.map((function(t,a){return""!==t.name&&t.deployment__active?r.a.createElement($e.a,{className:e.card,variant:"outlined",key:a},r.a.createElement(tt.a,null,r.a.createElement(y.a,{variant:"body1"},t.name),r.a.createElement(y.a,{variant:"body2"},"Total Submission Count:"," ",t.deployment__submission_count))):""}))):""))},Vt=a(452),Zt=function(){var e=Object(n.useContext)(ce),t=Object(i.a)(e,2);t[0],t[1];return r.a.createElement(de.a,{elevation:0},r.a.createElement(pe.a,{paddingTop:"2em",minHeight:"80vh"},r.a.createElement(y.a,{variant:"h5",align:"center",gutterBottom:!0},"Welcome to Precision Sustainable Agriculture Tech Dashboard"),r.a.createElement(Vt.a,{container:!0},r.a.createElement(Vt.a,{item:!0}))))},Kt=function(e){var t=e.component,a=e.path,c=Object(U.a)(e,["component","path"]),o=H(),l=o.loading,i=o.isAuthenticated,s=o.loginWithRedirect;Object(n.useEffect)((function(){if(!l&&!i){m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(s({appState:{targetUrl:a}}));case 2:case"end":return e.stop()}}))}}),[l,i,s,a]);return r.a.createElement(Ze.b,Object.assign({path:a,render:function(e){return!0===i?r.a.createElement(t,e):null}},c))},Qt=Object(p.a)((function(e){return{root:{flexGrow:1},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar}}));var $t=function(){var e=H().loading,t=Qt(),a=Object(n.useState)({palette:{primary:{main:"#2e7d32"},secondary:{main:"#4d4d4d"},type:window.localStorage.getItem("theme")?window.localStorage.getItem("theme"):"light"},typography:{useNextVariants:!0,fontFamily:"'Nunito', sans-serif"}}),c=Object(i.a)(a,2),o=c[0],s=c[1],u=Object(se.a)(o);return Object(n.useEffect)((function(){window.localStorage.getItem("theme")||window.localStorage.setItem("theme","light"),"light"!==o.palette.type?(window.localStorage.setItem("theme","dark"),document.body.style.backgroundColor="#121212"):(window.localStorage.setItem("theme","light"),document.body.style.backgroundColor="#fff")}),[o]),e?r.a.createElement("div",{className:t.root},r.a.createElement(ue.a,null),r.a.createElement(me.a,{theme:u},r.a.createElement(de.a,{style:{height:"100vh"}},r.a.createElement(pe.a,{height:"40vh"}),r.a.createElement(y.a,{variant:"h3",gutterBottom:!0,align:"center"},"Loading..")))):r.a.createElement(me.a,{theme:u},r.a.createElement(fe.a,{maxWidth:"xl",className:"mainContainer"},r.a.createElement(ie,{isDarkTheme:"light"!==o.palette.type,setDarkTheme:function(){var e="light"===o.palette.type?"dark":"light";s(Object(l.a)({},o,{palette:Object(l.a)({},o.palette,{type:e})}))}}),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.toolbar}),r.a.createElement(Ze.d,null,r.a.createElement(Ze.b,{render:function(e){return r.a.createElement(Zt,Object.assign({},e,{isDarkTheme:"light"!==o.palette.type}))},path:"/",exact:!0}),r.a.createElement(Kt,{path:"/table",render:function(e){return r.a.createElement(Ve,e)}}),r.a.createElement(Kt,{path:"/issues",component:lt,exact:!0}),r.a.createElement(Kt,{path:"/devices",component:bt,exact:!0}),r.a.createElement(Kt,{path:"/devices/:deviceId",component:Mt}),r.a.createElement(Kt,{path:"/kobo-forms",component:Jt})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(398);var Xt=a(51),ea=Object(Xt.a)(),ta=a(173);o.a.render(r.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,c=void 0===a?M:a,o=Object(U.a)(e,["children","onRedirectCallback"]),l=Object(n.useState)(),s=Object(i.a)(l,2),u=s[0],d=s[1],p=Object(n.useState)(),f=Object(i.a)(p,2),E=f[0],h=f[1],g=Object(n.useState)(),b=Object(i.a)(g,2),v=b[0],y=b[1],w=Object(n.useState)(!0),O=Object(i.a)(w,2),j=O[0],x=O[1],k=Object(n.useState)(!1),S=Object(i.a)(k,2),_=S[0],N=S[1];Object(n.useEffect)((function(){!function(){var e,t,a,n,r;m.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,m.a.awrap(B()(o));case 2:if(e=l.sent,y(e),!window.location.search.includes("code=")||!window.location.search.includes("state=")){l.next=10;break}return l.next=7,m.a.awrap(e.handleRedirectCallback());case 7:t=l.sent,a=t.appState,c(a);case 10:return l.next=12,m.a.awrap(e.isAuthenticated());case 12:if(n=l.sent,d(n),!n){l.next=19;break}return l.next=17,m.a.awrap(e.getUser());case 17:r=l.sent,h(r);case 19:x(!1);case 20:case"end":return l.stop()}}))}()}),[]);return r.a.createElement(G.Provider,{value:{isAuthenticated:u,user:E,loading:j,popupOpen:_,loginWithPopup:function(){var e,t,a=arguments;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{redirect_uri:"https://precisionsustainableag.org/tech-dashboard"},N(!0),n.prev=2,n.next=5,m.a.awrap(v.loginWithPopup(e));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:return n.prev=10,N(!1),n.finish(10);case 13:return n.next=15,m.a.awrap(v.getUser());case 15:t=n.sent,h(t),d(!0);case 18:case"end":return n.stop()}}),null,null,[[2,7,10,13]])},handleRedirectCallback:function(){var e;return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.next=3,m.a.awrap(v.handleRedirectCallback());case 3:return t.next=5,m.a.awrap(v.getUser());case 5:e=t.sent,x(!1),d(!0),h(e);case 9:case"end":return t.stop()}}))},getIdTokenClaims:function(){return v.getIdTokenClaims.apply(v,arguments)},loginWithRedirect:function(){return v.loginWithRedirect.apply(v,arguments)},getTokenSilently:function(){return v.getTokenSilently.apply(v,arguments)},getTokenWithPopup:function(){return v.getTokenWithPopup.apply(v,arguments)},logout:function(){return v.logout.apply(v,arguments)}}},t)}),{domain:ta.domain,client_id:ta.clientId,redirect_uri:"https://precision-sustainable-ag.github.io"===window.location.origin?window.location.origin+"/tech-dashboard":window.location.origin,onRedirectCallback:function(e){ea.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(oe,null,r.a.createElement(R.a,{history:ea},r.a.createElement($t,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[266,1,2]]]);
//# sourceMappingURL=main.a040a87c.chunk.js.map